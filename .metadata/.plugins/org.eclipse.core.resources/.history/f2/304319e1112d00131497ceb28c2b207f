import processing.core.PApplet;

public class Key {
	PApplet parent;
	float ampStart, ampEnd, ampNow;
	float attack, sustain;
	boolean isNoteOn;
	int index, freq;
	float x, y, h, low, hi, res;
	
	public Key(PApplet _parent, int _index, int _freq) {
        parent = _parent;
        index = _index;
        freq = freq;
        res = parent.width/14.0f;
        x = (index+1)*res;
        y = 25;
        h = 50;
        low = 100.0f;
        hi = 150.0f;
    }
	
	public void update(float attack, boolean isNoteOn) {
		System.out.println(attack+" "+isNoteOn+" ***");
		if (isNoteOn) {
			h = PApplet.map(attack, 0.0f, 1.0f, low, hi);
		} else {
			h = Math.round(h);
			if(h>low) { h--; }
		}
		parent.fill(220, 50, 47);
        parent.rect(x-res/2, y, res, h);
	}
}